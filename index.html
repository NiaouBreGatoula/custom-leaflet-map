<!DOCTYPE html>
<html>
  <head>
    <title>GTA V MAP - Leaflet</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
      body { margin: 0; padding: 0; }
      #map { height: 100vh; width: 100vw; }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
      const map = L.map('map').setView([0, 0], 2);

      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
      }).addTo(map);

      async function fetchBlips() {
        try {
          const response = await fetch('https://niaoubregatoula.github.io/custom-leaflet-map/blips.json');
          const data = await response.json();

          data.players.forEach(player => {
            L.marker([player.y, player.x])
              .addTo(map)
              .bindPopup(`Player: ${player.name}`);
          });
        } catch (error) {
          console.error("Failed to fetch blips:", error);
        }
      }

      fetchBlips();
      setInterval(fetchBlips, 5000); // Refresh κάθε 5 δευτερόλεπτα
    </script>
  </body>
</html>
